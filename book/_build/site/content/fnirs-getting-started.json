{"version":3,"kind":"Notebook","sha256":"3b523cc4ca2e392a22fceeb4f444a582682eeaef3581a69d085f1d95b2360166","slug":"fnirs-getting-started","location":"/fnirs_getting_started.ipynb","dependencies":[],"frontmatter":{"title":"fNIRS Hyperscanning study preparation for analysis","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"hypyp-synchro","language":"python"},"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"BSD-3-Clause","url":"https://opensource.org/licenses/BSD-3-Clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","free":true,"osi":true}},"github":"https://github.com/ppsp-team/HyPyPCookBook","source_url":"https://github.com/ppsp-team/HyPyPCookBook/blob/main/book/fnirs_getting_started.ipynb","edit_url":"https://github.com/ppsp-team/HyPyPCookBook/edit/main/book/fnirs_getting_started.ipynb","exports":[{"format":"ipynb","filename":"fnirs_getting_started.ipynb","url":"/fnirs_getting_starte-ffb88514379160162ceccfb341e1f333.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Author: Patrice Fortin","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JcGykDwfTb"}],"key":"QNDJNpUR95"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Date: 2025-01-06","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FN5lv264ye"}],"key":"YrDPxX3LwD"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"The following Jupyter Notebook shows how to go from raw fNIRS hyperscanning recordings to produce an output file suitable for statistical analysis of Inter-Brain Synchrony (IBS).","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Cz6BMYV2NG"}],"key":"IgxENzbyzc"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The output file can be of ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"qoB4k8rlCM"},{"type":"inlineCode","value":".csv","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"t1x6DKXE98"},{"type":"text","value":" or ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"sfpoM7zagw"},{"type":"inlineCode","value":".feather","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"QiQnsEaAVN"},{"type":"text","value":".","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"AAnOPrnQav"}],"key":"Yf4eJXNBCY"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"For an analysis example in ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"Ib5DWpoXz6"},{"type":"inlineCode","value":"R","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"VASITRua7n"},{"type":"text","value":" language, see ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"zws6AAOoOv"},{"type":"inlineCode","value":"tutorial/fnirs_study_example.R","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"hsKnx0p6ZD"},{"type":"text","value":".","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"lpMuVs3m8E"}],"key":"GQ7VwKf0Ca"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"For an in-depth exploration of wavelet transforms, see ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"mL9cGn6aWf"},{"type":"inlineCode","value":"tutorial/wavelet_exploration.ipynb","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"PyF4hLbmx6"}],"key":"nGnVWxX7uD"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"For an complete walkthrough of fnirs data inspection at every step, see ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"EebHCdeKMy"},{"type":"inlineCode","value":"tutorial/fnirs_recording_inspection.ipynb","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"RUrA9AwbTJ"}],"key":"wtIOWaXooc"}],"key":"rHyhfMbE1P"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Load libraries","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cwDPZL0Ig5"}],"identifier":"load-libraries","label":"Load libraries","html_id":"load-libraries","implicit":true,"key":"HMrXrD2R2Y"}],"key":"Du6JwcPv7y"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:36:48.269481Z","iopub.status.busy":"2025-07-03T19:36:48.269157Z","iopub.status.idle":"2025-07-03T19:36:48.852887Z","shell.execute_reply":"2025-07-03T19:36:48.852241Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"import re\nfrom collections import OrderedDict, defaultdict\nimport matplotlib.pyplot as plt","key":"e8v3U60xq7"},{"type":"outputs","id":"OWJL9kObpYOBBDGhEdQap","children":[],"key":"ZgER4FFVKK"}],"key":"BVAcEZPX53"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:36:48.855520Z","iopub.status.busy":"2025-07-03T19:36:48.855235Z","iopub.status.idle":"2025-07-03T19:36:51.049004Z","shell.execute_reply":"2025-07-03T19:36:51.048004Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"%load_ext IPython.extensions.autoreload\n%autoreload 2\n\nimport hypyp.fnirs as fnirs\nfrom hypyp.wavelet import ComplexMorletWavelet\nfrom hypyp.utils import Task, TASK_NEXT_EVENT","key":"b6wSrPVYoG"},{"type":"outputs","id":"AY3m-fbX2nT9KRksNPn1U","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"The IPython.extensions.autoreload extension is already loaded. To reload it, use:\n  %reload_ext IPython.extensions.autoreload\n"},"children":[],"key":"yuC0jgWwb2"}],"key":"nbkoukLuOA"}],"key":"kGkcPC78Fb"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Download and load raw data from disk","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uUp5QwFdEu"}],"identifier":"download-and-load-raw-data-from-disk","label":"Download and load raw data from disk","html_id":"download-and-load-raw-data-from-disk","implicit":true,"key":"UDwD5rbcwf"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To use as example, we download the dataset “Dataset of parent-child hyperscanning fNIRS recordings” from ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YbePaK8HIr"},{"type":"link","url":"https://researchdata.ntu.edu.sg/dataset.xhtml?persistentId=doi:10.21979/N9/35DNCW","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​researchdata​.ntu​.edu​.sg​/dataset​.xhtml​?persistentId​=​doi:10​.21979​/N9​/35DNCW","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NgWblwiw0M"}],"urlSource":"https://researchdata.ntu.edu.sg/dataset.xhtml?persistentId=doi:10.21979/N9/35DNCW","key":"sv72AMCFBC"}],"key":"yKgU5wwlNW"}],"key":"wbmexoXjUS"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:36:51.052854Z","iopub.status.busy":"2025-07-03T19:36:51.052125Z","iopub.status.idle":"2025-07-03T19:36:52.869254Z","shell.execute_reply":"2025-07-03T19:36:52.868094Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"browser = fnirs.DataBrowser()\ndir = browser.download_demo_dataset()\n","key":"IjmeRJWCgz"},{"type":"outputs","id":"ZrOJt_Zr9r5Um2P_pk1PG","children":[],"key":"TZVtcjz0p7"}],"key":"nhNZ7xxfNf"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prepare dyads paths (parent+child) for file loading","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"faVqc2c38e"}],"key":"A0y7MWOHGH"}],"key":"uzKnkhuTZx"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:36:52.873183Z","iopub.status.busy":"2025-07-03T19:36:52.872928Z","iopub.status.idle":"2025-07-03T19:36:52.938378Z","shell.execute_reply":"2025-07-03T19:36:52.937450Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Get the paths for dyads\n\npaths = [path for path in browser.list_all_files() if 'fathers' in path]\n\ndyad_paths = defaultdict(dict)\n\nfor path in paths:\n    m = re.search(r'(FCS\\d\\d)', path)\n    dyad_label = m.group(1)\n\n    if 'child' in path:\n        dyad_paths[dyad_label]['child'] = path\n\n    if 'parent' in path:\n        dyad_paths[dyad_label]['parent'] = path\n\nprint(dyad_paths)\n","key":"YdIYwZWGbY"},{"type":"outputs","id":"sOKLGsSc7nGXKFzwzBOpM","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"defaultdict(<class 'dict'>, {'FCS01': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS01/child/NIRS-2019-09-28_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS01/parent/NIRS-2019-09-28_002.hdr'}, 'FCS02': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS02/child/NIRS-2019-10-06_004.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS02/parent/NIRS-2019-10-06_004.hdr'}, 'FCS03': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS03/child/NIRS-2019-10-12_003.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS03/parent/NIRS-2019-10-12_003.hdr'}, 'FCS04': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS04/child/NIRS-2019-10-12_001.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS04/parent/NIRS-2019-10-12_001.hdr'}, 'FCS05': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS05/child/NIRS-2019-10-06_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS05/parent/NIRS-2019-10-06_002.hdr'}, 'FCS06': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS06/child/NIRS-2019-10-19_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS06/parent/NIRS-2019-10-19_002.hdr'}, 'FCS07': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS07/child/NIRS-2019-11-03_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS07/parent/NIRS-2019-11-03_002.hdr'}, 'FCS08': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS08/child/NIRS-2019-11-18_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS08/parent/NIRS-2019-11-18_002.hdr'}, 'FCS09': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS09/child/NIRS-2019-11-02_011.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS09/parent/NIRS-2019-11-02_011.hdr'}, 'FCS10': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS10/child/NIRS-2019-11-02_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS10/parent/NIRS-2019-11-02_002.hdr'}, 'FCS11': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS11/child/NIRS-2019-11-09_001.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS11/parent/NIRS-2019-11-09_001.hdr'}, 'FCS12': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS12/child/NIRS-2019-11-16_003.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS12/parent/NIRS-2019-11-16_003.hdr'}, 'FCS13': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS13/child/NIRS-2019-11-16_005.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS13/parent/NIRS-2019-11-16_005.hdr'}, 'FCS14': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS14/child/NIRS-2019-12-16_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS14/parent/NIRS-2019-12-16_002.hdr'}, 'FCS15': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS15/child/NIRS-2019-11-06_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS15/parent/NIRS-2019-11-06_002.hdr'}, 'FCS16': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS16/child/NIRS-2019-10-29_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS16/parent/NIRS-2019-10-29_002.hdr'}, 'FCS17': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS17/child/NIRS-2019-11-15_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS17/parent/NIRS-2019-11-15_002.hdr'}, 'FCS19': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS19/child/NIRS-2019-10-25_005.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS19/parent/NIRS-2019-10-25_005.hdr'}, 'FCS20': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS20/child/NIRS-2019-11-17_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS20/parent/NIRS-2019-11-17_002.hdr'}, 'FCS21': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS21/child/NIRS-2019-11-10_006.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS21/parent/NIRS-2019-11-10_006.hdr'}, 'FCS22': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS22/child/NIRS-2019-11-09_004.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS22/parent/NIRS-2019-11-09_004.hdr'}, 'FCS23': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS23/child/NIRS-2019-11-10_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS23/parent/NIRS-2019-11-10_002.hdr'}, 'FCS25': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS25/child/NIRS-2019-10-26_003.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS25/parent/NIRS-2019-10-26_003.hdr'}, 'FCS26': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS26/child/NIRS-2019-11-30_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS26/parent/NIRS-2019-11-30_002.hdr'}, 'FCS27': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS27/child/NIRS-2019-11-16_006.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS27/parent/NIRS-2019-11-16_006.hdr'}, 'FCS28': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS28/child/NIRS-2019-11-10_003.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS28/parent/NIRS-2019-11-10_003.hdr'}, 'FCS29': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS29/child/NIRS-2019-11-17_004.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS29/parent/NIRS-2019-11-17_004.hdr'}, 'FCS30': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS30/child/NIRS-2019-11-02_013.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS30/parent/NIRS-2019-11-02_013.hdr'}, 'FCS32': {'child': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS32/child/NIRS-2019-12-15_002.hdr', 'parent': '/home/pfortin/work/ppsp/HyPyP-synchro/data/NIRS/downloads/fathers/FCS32/parent/NIRS-2019-12-15_002.hdr'}})\n"},"children":[],"key":"cMMCLKBhVr"}],"key":"RP0CLHQzsH"}],"key":"E2b9E1DKRP"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Regions of Interest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ww1vhNpFJK"}],"identifier":"regions-of-interest","label":"Regions of Interest","html_id":"regions-of-interest","implicit":true,"key":"kdkNCLhAsg"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s define some region of interest, from ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"thI0YfQBrk"},{"type":"link","url":"https://www.nature.com/articles/s41598-019-47810-4","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​www​.nature​.com​/articles​/s41598​-019​-47810-4","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GPg1axPhLZ"}],"urlSource":"https://www.nature.com/articles/s41598-019-47810-4","key":"wfmb6TlEAc"},{"type":"text","value":" Figure 3.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JtGImaHPUm"}],"key":"OE0Umbervu"}],"key":"VfdTGhBsiB"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:36:52.943056Z","iopub.status.busy":"2025-07-03T19:36:52.942749Z","iopub.status.idle":"2025-07-03T19:36:52.972230Z","shell.execute_reply":"2025-07-03T19:36:52.971432Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# dummy values\nchannel_roi = fnirs.ChannelROI(OrderedDict({\n    'frontal_left': [\n        'S2_D3 hbo', # 4,\n        'S3_D3 hbo', # 6,\n        'S3_D4 hbo', # 7,\n        'S5_D3 hbo', # 11,\n    ],\n    'medial_left':[\n        'S1_D1 hbo', # 1,\n        'S1_D2 hbo', # 2,\n        'S2_D1 hbo', # 3,\n        'S3_D2 hbo', # 5,\n        'S4_D2 hbo', # 8,\n    ],\n    'central': [\n        'S4_D4 hbo', # 9,\n        'S5_D4 hbo', # 12,\n    ],\n    'frontal_right': [\n        'S5_D6 hbo', # 13,\n        'S6_D4 hbo', # 14,\n        'S6_D6 hbo', # 16,\n        'S8_D6 hbo', # 19,\n    ],\n    'medial_right':[\n        'S4_D5 hbo', # 10,\n        'S6_D5 hbo', # 15,\n        'S7_D5 hbo', # 17,\n        'S7_D7 hbo', # 18,\n        'S8_D7 hbo', # 20\n    ],\n}))\n","key":"LXRac6uifR"},{"type":"outputs","id":"FsLD55QIfR8c2o-C1awfL","children":[],"key":"gZFlrGKUNV"}],"key":"VN8K1cUJwu"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"One dyad example","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"USVU75iH0t"}],"identifier":"one-dyad-example","label":"One dyad example","html_id":"one-dyad-example","implicit":true,"key":"xad8lwioZn"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"As a simple example, let’s look at a single inter-subject coherence.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eU2d9vThTV"}],"key":"maWxuc1Jxj"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Let’s define some task for demonstration of how we can use time based tasks.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KnJqdYc18d"}],"key":"aR9aA7KA3K"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Take a look at ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"F0HRlrM2dz"},{"type":"inlineCode","value":"fnirs.Recording","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"cS6TPERNbW"},{"type":"text","value":" constructor if you have event based tasks.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FzsCU0jX1F"}],"key":"yYpT37hebf"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"NOTE: The tasks here do not correspond the the actual conditions from the dataset. They are set as an example on how to use the toolbox.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"zPIQIlz13v"}],"key":"JZ0sLFOMpa"}],"key":"GZo4HYNLD4"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:36:52.977160Z","iopub.status.busy":"2025-07-03T19:36:52.976570Z","iopub.status.idle":"2025-07-03T19:36:56.937446Z","shell.execute_reply":"2025-07-03T19:36:56.936763Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Get connectivity matrix intra-subject for validation\n\ndyad_label = list(dyad_paths.keys())[0]\ndyad_info = list(dyad_paths.values())[0]\ntasks = [Task('one_minute', onset_time=0, duration=60)]\n\n# Example if you have tasks from events in the recordings\n#tasks = [\n#    Task('baseline', onset_event_id=1, offset_event_id=TASK_NEXT_EVENT),\n#    Task('task1',    onset_event_id=2, offset_event_id=TASK_NEXT_EVENT),\n#    Task('task2',    onset_event_id=3, offset_event_id=TASK_NEXT_EVENT),\n#    Task('task3',    onset_event_id=4, offset_event_id=TASK_NEXT_EVENT),\n#]\n\n# use a preprocessor to transform the cw amplitude data to hemoglobin concentration\npreprocessor = fnirs.MnePreprocessorRawToHaemo()\n\ns1 = fnirs.Recording(tasks=tasks, channel_roi=channel_roi).load_file(dyad_info['child'], preprocessor)\ns2 = fnirs.Recording(tasks=tasks, channel_roi=channel_roi).load_file(dyad_info['parent'], preprocessor)\n\ndyad = fnirs.Dyad(s1, s2, label=dyad_label)\ndyad.compute_wtcs(\n    ch_match='hbo',     # which channels to match\n    bin_seconds=15,     # split in bins of 15 seconds\n    period_cuts=[5, 10],    # split higher and lower frequencies for comparison\n)\n\ndyad.df[['dyad','subject1','subject2','roi1','roi2','channel1','channel2','task','epoch','bin','coherence']]\n\n","key":"CY2fl9sHWl"},{"type":"outputs","id":"byfNsvGCJ5uW3T0ywwmhu","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":50,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>dyad</th>\n      <th>subject1</th>\n      <th>subject2</th>\n      <th>roi1</th>\n      <th>roi2</th>\n      <th>channel1</th>\n      <th>channel2</th>\n      <th>task</th>\n      <th>epoch</th>\n      <th>bin</th>\n      <th>coherence</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>FCS01</td>\n      <td>FCS01CP</td>\n      <td>FCS01FP</td>\n      <td>frontal_left</td>\n      <td>frontal_left</td>\n      <td>S2_D3 hbo</td>\n      <td>S2_D3 hbo</td>\n      <td>one_minute</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0.269716</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>FCS01</td>\n      <td>FCS01CP</td>\n      <td>FCS01FP</td>\n      <td>frontal_left</td>\n      <td>frontal_left</td>\n      <td>S2_D3 hbo</td>\n      <td>S2_D3 hbo</td>\n      <td>one_minute</td>\n      <td>0</td>\n      <td>1</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>FCS01</td>\n      <td>FCS01CP</td>\n      <td>FCS01FP</td>\n      <td>frontal_left</td>\n      <td>frontal_left</td>\n      <td>S2_D3 hbo</td>\n      <td>S2_D3 hbo</td>\n      <td>one_minute</td>\n      <td>0</td>\n      <td>2</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>FCS01</td>\n      <td>FCS01CP</td>\n      <td>FCS01FP</td>\n      <td>frontal_left</td>\n      <td>frontal_left</td>\n      <td>S2_D3 hbo</td>\n      <td>S2_D3 hbo</td>\n      <td>one_minute</td>\n      <td>0</td>\n      <td>3</td>\n      <td>0.151085</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>FCS01</td>\n      <td>FCS01CP</td>\n      <td>FCS01FP</td>\n      <td>frontal_left</td>\n      <td>frontal_left</td>\n      <td>S2_D3 hbo</td>\n      <td>S2_D3 hbo</td>\n      <td>one_minute</td>\n      <td>0</td>\n      <td>4</td>\n      <td>0.426708</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>13003</th>\n      <td>FCS01FP(intra)</td>\n      <td>FCS01FP</td>\n      <td>FCS01FP</td>\n      <td>medial_right</td>\n      <td>medial_right</td>\n      <td>S8_D7 hbo</td>\n      <td>S8_D7 hbo</td>\n      <td>one_minute</td>\n      <td>0</td>\n      <td>7</td>\n      <td>1.000000</td>\n    </tr>\n    <tr>\n      <th>13004</th>\n      <td>FCS01FP(intra)</td>\n      <td>FCS01FP</td>\n      <td>FCS01FP</td>\n      <td>medial_right</td>\n      <td>medial_right</td>\n      <td>S8_D7 hbo</td>\n      <td>S8_D7 hbo</td>\n      <td>one_minute</td>\n      <td>0</td>\n      <td>8</td>\n      <td>1.000000</td>\n    </tr>\n    <tr>\n      <th>13005</th>\n      <td>FCS01FP(intra)</td>\n      <td>FCS01FP</td>\n      <td>FCS01FP</td>\n      <td>medial_right</td>\n      <td>medial_right</td>\n      <td>S8_D7 hbo</td>\n      <td>S8_D7 hbo</td>\n      <td>one_minute</td>\n      <td>0</td>\n      <td>9</td>\n      <td>1.000000</td>\n    </tr>\n    <tr>\n      <th>13006</th>\n      <td>FCS01FP(intra)</td>\n      <td>FCS01FP</td>\n      <td>FCS01FP</td>\n      <td>medial_right</td>\n      <td>medial_right</td>\n      <td>S8_D7 hbo</td>\n      <td>S8_D7 hbo</td>\n      <td>one_minute</td>\n      <td>0</td>\n      <td>10</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>13007</th>\n      <td>FCS01FP(intra)</td>\n      <td>FCS01FP</td>\n      <td>FCS01FP</td>\n      <td>medial_right</td>\n      <td>medial_right</td>\n      <td>S8_D7 hbo</td>\n      <td>S8_D7 hbo</td>\n      <td>one_minute</td>\n      <td>0</td>\n      <td>11</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n<p>13008 rows × 11 columns</p>\n</div>","content_type":"text/html"},"text/plain":{"content":"                 dyad subject1 subject2          roi1          roi2  \\\n0               FCS01  FCS01CP  FCS01FP  frontal_left  frontal_left   \n1               FCS01  FCS01CP  FCS01FP  frontal_left  frontal_left   \n2               FCS01  FCS01CP  FCS01FP  frontal_left  frontal_left   \n3               FCS01  FCS01CP  FCS01FP  frontal_left  frontal_left   \n4               FCS01  FCS01CP  FCS01FP  frontal_left  frontal_left   \n...               ...      ...      ...           ...           ...   \n13003  FCS01FP(intra)  FCS01FP  FCS01FP  medial_right  medial_right   \n13004  FCS01FP(intra)  FCS01FP  FCS01FP  medial_right  medial_right   \n13005  FCS01FP(intra)  FCS01FP  FCS01FP  medial_right  medial_right   \n13006  FCS01FP(intra)  FCS01FP  FCS01FP  medial_right  medial_right   \n13007  FCS01FP(intra)  FCS01FP  FCS01FP  medial_right  medial_right   \n\n        channel1   channel2        task  epoch  bin  coherence  \n0      S2_D3 hbo  S2_D3 hbo  one_minute      0    0   0.269716  \n1      S2_D3 hbo  S2_D3 hbo  one_minute      0    1        NaN  \n2      S2_D3 hbo  S2_D3 hbo  one_minute      0    2        NaN  \n3      S2_D3 hbo  S2_D3 hbo  one_minute      0    3   0.151085  \n4      S2_D3 hbo  S2_D3 hbo  one_minute      0    4   0.426708  \n...          ...        ...         ...    ...  ...        ...  \n13003  S8_D7 hbo  S8_D7 hbo  one_minute      0    7   1.000000  \n13004  S8_D7 hbo  S8_D7 hbo  one_minute      0    8   1.000000  \n13005  S8_D7 hbo  S8_D7 hbo  one_minute      0    9   1.000000  \n13006  S8_D7 hbo  S8_D7 hbo  one_minute      0   10        NaN  \n13007  S8_D7 hbo  S8_D7 hbo  one_minute      0   11        NaN  \n\n[13008 rows x 11 columns]","content_type":"text/plain"}}},"children":[],"key":"Z4uFHgDI53"}],"key":"eguAaluIMr"}],"key":"SogtfTwGCg"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Wavelet Transform Coherence (WTC) details","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eWYSmMLv2b"}],"key":"i5ItAZIWNF"}],"key":"irH9IT7FYH"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s take a look at the Wavelet Transform Coherence. We take the first WTC to inspect it.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"weRA0vcNFR"}],"key":"kRcBHGaIaB"}],"key":"vQwNE2Kjzq"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:36:58.366588Z","iopub.status.busy":"2025-07-03T19:36:58.366005Z","iopub.status.idle":"2025-07-03T19:37:00.105502Z","shell.execute_reply":"2025-07-03T19:37:00.104508Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"wtc = dyad.wtcs[0]\n_ = wtc.plot(use_periods=True)\n","key":"c4Z2s71bKX"},{"type":"outputs","id":"aaZTQCPS010Nan5QKDMHq","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"e647a9ff568f36362b9c861b60457fab","path":"/e647a9ff568f36362b9c861b60457fab.png"},"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"uO0BVO7fQn"}],"key":"MkP2GAcFDS"}],"key":"c96XJzUHsT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Computation validation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dM4Xr6vwER"}],"identifier":"computation-validation","label":"Computation validation","html_id":"computation-validation","implicit":true,"key":"RkVwnMRUyp"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In order to be confident in the above results, let’s look at intermediary results.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oglnbUZq59"}],"key":"b5RRcylOlR"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The above Wavelet Transform Coherence (WTC) is a computed from the 2 Continuous Wavelet Transforms (CWT):","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"r8PQQ3qYrd"}],"key":"Y6RYrYNwyo"}],"key":"l1RQGoxyAO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig, axes = plt.subplots(1, 2, sharey=True, figsize=(12, 4))\nwtc.cwt1.plot(ax=axes[0])\nwtc.cwt2.plot(ax=axes[1])\nfig.suptitle(f\"{dyad.s1.subject_label} / {dyad.s2.subject_label}\")\n","key":"VZ7K1GUEJN"},{"type":"outputs","id":"qLUdpEotQUbysJFDYE4yW","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"9ad1eecacc20da74096192434516d4cf","path":"/9ad1eecacc20da74096192434516d4cf.png"},"text/plain":{"content":"<Figure size 1200x400 with 4 Axes>","content_type":"text/plain"}}},"children":[],"key":"RB8vC5r3LD"}],"key":"lZGerHsukl"}],"key":"kf5WHRsJaO"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The Continuous Wavelet Transforms (CWTs) come from the hemoglobin that has been computed from the raw cw amplitudes in the signal.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"N0eRqItDQU"}],"key":"MjWZuuvxpo"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Let’s take a look at the original data and its Continuous Wavelet Transform. For more details on visualizing the Continuous\nWavelet Transform and all the filtering steps, see ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Z4cDPMB0JH"},{"type":"inlineCode","value":"fnirs_recording_inspection.ipynb","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yH16zS54OU"},{"type":"text","value":" notebook.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"l5Sa6mNXhQ"}],"key":"PJKN60BGvI"}],"key":"vvH87116Ep"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"fig = dyad.s1.plot_steps_for_channel(wtc.label_ch1)\nfig.suptitle(f\"{dyad.s1.subject_label}: \" + fig.get_suptitle())\nplt.show()\nfig = dyad.s2.plot_steps_for_channel(wtc.label_ch2)\nfig.suptitle(f\"{dyad.s2.subject_label}: \" + fig.get_suptitle())\nplt.show()","key":"Uk9UQeiHfr"},{"type":"outputs","id":"etOstcINFngXTRpuMfu9O","children":[{"type":"output","jupyter_data":{"name":"stderr","output_type":"stream","text":"/home/pfortin/work/ppsp/HyPyP-synchro/hypyp/fnirs/recording.py:353: UserWarning: No artists with labels found to put in legend.  Note that artists whose label start with an underscore are ignored when legend() is called with no argument.\n  axes[j].legend()\n"},"children":[],"key":"tMsQwCc1lL"},{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"d106d733a6ab28f4d2c1634ea1c11fad","path":"/d106d733a6ab28f4d2c1634ea1c11fad.png"},"text/plain":{"content":"<Figure size 1200x1800 with 6 Axes>","content_type":"text/plain"}}},"children":[],"key":"MO73Ay0nUR"},{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"059dc8e099a9f6f27f4192690cc34ac1","path":"/059dc8e099a9f6f27f4192690cc34ac1.png"},"text/plain":{"content":"<Figure size 1200x1800 with 6 Axes>","content_type":"text/plain"}}},"children":[],"key":"idplSWlIWe"}],"key":"MOcIBHEnlV"}],"key":"JQrnfBNdln"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:37:00.110922Z","iopub.status.busy":"2025-07-03T19:37:00.110465Z","iopub.status.idle":"2025-07-03T19:37:02.622316Z","shell.execute_reply":"2025-07-03T19:37:02.621603Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"_ = dyad.plot_coherence_matrix_per_channel().axes[0].set_title('Dyad coherence per channel')\n","key":"oafrPEYtBg"},{"type":"outputs","id":"CWygA2UwnjfgkOJahme4s","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1ddb43cb57193f2aae0b0f7775e4fc8e","path":"/1ddb43cb57193f2aae0b0f7775e4fc8e.png"},"text/plain":{"content":"<Figure size 800x800 with 4 Axes>","content_type":"text/plain"}}},"children":[],"key":"ZVDpGKxu94"}],"key":"iv5EHcXrug"}],"key":"VY0gmXJspG"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"\n_ = dyad.plot_coherence_matrix_per_roi().axes[0].set_title('Dyad coherence per region')\n","key":"n9Onpyw31D"},{"type":"outputs","id":"Ne2Dktw-p_KmYX2cJPTmv","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"98f3c7892509eca6f3bc8f631374c316","path":"/98f3c7892509eca6f3bc8f631374c316.png"},"text/plain":{"content":"<Figure size 800x800 with 4 Axes>","content_type":"text/plain"}}},"children":[],"key":"TxkqdYwWKh"}],"key":"gGwYPtECdc"}],"key":"dL1w9jQsxn"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Study","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AWwUu6v6rM"}],"identifier":"study","label":"Study","html_id":"study","implicit":true,"key":"mKUO0JAgMe"}],"key":"YTF81ORyRP"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Study Coherence processing","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gFFpYK7uIR"}],"identifier":"study-coherence-processing","label":"Study Coherence processing","html_id":"study-coherence-processing","implicit":true,"key":"VbyMzBMcOC"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We now apply the same strategy on a cohort of dyads. We define a baseline task and a sample task.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yAneEgGRRt"}],"key":"JA4bVYZeWu"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The resulting is a ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"P6mLUtaYtV"},{"type":"inlineCode","value":"Study","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"VJf6zVJivw"},{"type":"text","value":" object, which encapsulates all the logic of processing, computing WTC and preparing pandas dataframe for analysis.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"RDsU7gMJK8"}],"key":"VhbpUtOGFQ"}],"key":"I7nVqHlSuy"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:37:02.627170Z","iopub.status.busy":"2025-07-03T19:37:02.626395Z","iopub.status.idle":"2025-07-03T19:37:08.239966Z","shell.execute_reply":"2025-07-03T19:37:08.239264Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Instanciate recordings and dyads objects\n\npreprocessor = fnirs.MnePreprocessorRawToHaemo()\ntasks = [\n    Task('first_minute', onset_time=0, duration=60),\n    Task('second_minute', onset_time=60, duration=60),\n]\n\nn_dyads = 10\nall_dyads = []\n\n# truncate for this example\ndyad_paths_keys = list(dyad_paths.keys())[:n_dyads]\n\nfor dyad_key in dyad_paths_keys:\n    dyad = fnirs.Dyad(\n        fnirs.Recording(tasks=tasks, channel_roi=channel_roi).load_file(dyad_paths[dyad_key]['child'], preprocessor),\n        fnirs.Recording(tasks=tasks, channel_roi=channel_roi).load_file(dyad_paths[dyad_key]['parent'], preprocessor),\n        label=dyad_key,\n    )\n    all_dyads.append(dyad)\n\nstudy = fnirs.Study(all_dyads)\n\n","key":"mnxsT0I22P"},{"type":"outputs","id":"NyprLjGGac6GZn-GO9alK","children":[],"key":"GFIji7vfUA"}],"key":"vOKxJhAruc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Wavelet object","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NsFawus1pr"}],"identifier":"wavelet-object","label":"Wavelet object","html_id":"wavelet-object","implicit":true,"key":"pAVAxLDBri"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s define our wavelet object. The following code simple instanciates the default wavelet. We do it explicitely for the sake of demonstration only.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"G0AFBDh6RA"}],"key":"AKEA8eYRFu"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The Wavelet uses caching to avoid recomputing continuous wavelet transforms all the time for the same channels.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"X6e8iACn0P"}],"key":"zSlO0bDfvy"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Since the cache dictionary is shared by all dyads, a new pair with pre-computed CWT for channels will be much faster.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"gsmY1MKDyQ"}],"key":"bY7Yb8rAU8"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The cache is simply a python dictionary.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"aLL3tnvpH1"}],"key":"GMiUYb3jsh"}],"key":"rJ7aX6pmYw"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:37:08.244962Z","iopub.status.busy":"2025-07-03T19:37:08.244378Z","iopub.status.idle":"2025-07-03T19:37:08.276693Z","shell.execute_reply":"2025-07-03T19:37:08.275838Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"cache = dict()\nwavelet = ComplexMorletWavelet(cache=cache)\n","key":"exydkNmdJA"},{"type":"outputs","id":"qAwn6SMBvsEdEbUrCAcgn","children":[],"key":"S5bMhevugs"}],"key":"WJBGmnDiio"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:37:08.281511Z","iopub.status.busy":"2025-07-03T19:37:08.280814Z","iopub.status.idle":"2025-07-03T19:39:23.205034Z","shell.execute_reply":"2025-07-03T19:39:23.203853Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"study.compute_wtcs(\n    ch_match='hbo',     # compute coherence only on oxyhemoglobin channels\n    wavelet=wavelet,    # use our predefined wavelet\n    with_intra=True,    # compute intra subject for nicer display in quadrants\n    bin_seconds=15,     # split in 10 seconds bins weight balancing. See `fnirs_wavelet_exploration.ipynb` for more details\n    period_cuts=[5,10], # split frequencies in lower/higher to visualize which range has a higher coherence\n    downsample=100,     # downsamples the wtc results for saving memory and allows faster display in plots\n    verbose=False,      # use this flag to see the progress of processing\n    # If memory usage gets too big during the processing, consider dropping the WTCs and store only the mean coherence\n    #keep_wtcs=False,   # delete computed WTCs after run, to avoid storing huge files\n)","key":"cAJiHdLM47"},{"type":"outputs","id":"3DWbT-338nW1wZB_-MxyJ","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Time for computing one dyad: 6 seconds\nExpected time for 10 dyads: 55 seconds\n"},"children":[],"key":"QMZZWzLZsF"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":41,"metadata":{},"data":{"text/plain":{"content":"<hypyp.fnirs.study.Study at 0x7f23fcfe3a40>","content_type":"text/plain"}}},"children":[],"key":"SFN6oiKJ0g"}],"key":"YILAk6TmyW"}],"key":"iwQfB1KhDE"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Coherence matrix","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JXpLXCF9Sv"}],"identifier":"coherence-matrix","label":"Coherence matrix","html_id":"coherence-matrix","implicit":true,"key":"igp8kHjjwQ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Visualize the coherence matrix averaged over all dyads. Top left and bottom right are intra-subject coherence. Bottom left and top right are mirrors of the inter-subject coherence.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"S1lsJz9gvD"}],"key":"e4Z3qNulA6"}],"key":"vbu3pYeS3s"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:39:25.769156Z","iopub.status.busy":"2025-07-03T19:39:25.768858Z","iopub.status.idle":"2025-07-03T19:39:29.104628Z","shell.execute_reply":"2025-07-03T19:39:29.103789Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"_ = study.plot_coherence_matrix_per_channel(s1_label='Child', s2_label='Parent')\n","key":"LPO4yPhCEM"},{"type":"outputs","id":"dgwrJJTDKkina2cTe2jqx","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"092510a110b68149f4e6bf56d42e8371","path":"/092510a110b68149f4e6bf56d42e8371.png"},"text/plain":{"content":"<Figure size 800x800 with 4 Axes>","content_type":"text/plain"}}},"children":[],"key":"NURTh60Nfo"}],"key":"xCnkFKG04m"}],"key":"c12OqJSxlg"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"\n_ = study.plot_coherence_matrix_per_roi(s1_label='Child', s2_label='Parent')\n\n","key":"zrkR0xtoTw"},{"type":"outputs","id":"rS4QKd3XOlzS6s5m6ZWDN","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"8f8b3a89eec7e56f19aa1a3a7f71df2a","path":"/8f8b3a89eec7e56f19aa1a3a7f71df2a.png"},"text/plain":{"content":"<Figure size 800x800 with 4 Axes>","content_type":"text/plain"}}},"children":[],"key":"upYkfezqWf"}],"key":"dcYyobPhbC"}],"key":"M78oP0Kkmk"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The study object now has a pandas dataframe object that can be used or stored for further analysis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qTk6Sbkc2s"}],"key":"maW7QAexZO"}],"key":"Vk3SxmAB0q"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:39:29.107817Z","iopub.status.busy":"2025-07-03T19:39:29.107581Z","iopub.status.idle":"2025-07-03T19:39:29.286378Z","shell.execute_reply":"2025-07-03T19:39:29.285738Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"df = study.df[study.df['is_intra'] == False]\ndf\n","key":"a3gT3Q2wFe"},{"type":"outputs","id":"8YE-l7cg3KtZtakHVRTPD","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":48,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>dyad</th>\n      <th>is_intra</th>\n      <th>is_intra_of</th>\n      <th>is_pseudo</th>\n      <th>subject1</th>\n      <th>subject2</th>\n      <th>roi1</th>\n      <th>roi2</th>\n      <th>channel1</th>\n      <th>channel2</th>\n      <th>task</th>\n      <th>epoch</th>\n      <th>section</th>\n      <th>bin</th>\n      <th>coherence</th>\n      <th>coherence_masked</th>\n      <th>bin_time_range</th>\n      <th>bin_period_range</th>\n      <th>wavelet_library</th>\n      <th>wavelet_name</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>FCS01</td>\n      <td>False</td>\n      <td>NaN</td>\n      <td>False</td>\n      <td>FCS01CP</td>\n      <td>FCS01FP</td>\n      <td>frontal_left</td>\n      <td>frontal_left</td>\n      <td>S2_D3 hbo</td>\n      <td>S2_D3 hbo</td>\n      <td>first_minute</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0.270656</td>\n      <td>0.312500</td>\n      <td>0-15</td>\n      <td>2.0-4.8</td>\n      <td>pywavelets</td>\n      <td>cmor2,1[win:0.6]</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>FCS01</td>\n      <td>False</td>\n      <td>NaN</td>\n      <td>False</td>\n      <td>FCS01CP</td>\n      <td>FCS01FP</td>\n      <td>frontal_left</td>\n      <td>frontal_left</td>\n      <td>S2_D3 hbo</td>\n      <td>S2_D3 hbo</td>\n      <td>first_minute</td>\n      <td>0</td>\n      <td>0</td>\n      <td>1</td>\n      <td>NaN</td>\n      <td>0.692029</td>\n      <td>0-15</td>\n      <td>5.1-9.8</td>\n      <td>pywavelets</td>\n      <td>cmor2,1[win:0.6]</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>FCS01</td>\n      <td>False</td>\n      <td>NaN</td>\n      <td>False</td>\n      <td>FCS01CP</td>\n      <td>FCS01FP</td>\n      <td>frontal_left</td>\n      <td>frontal_left</td>\n      <td>S2_D3 hbo</td>\n      <td>S2_D3 hbo</td>\n      <td>first_minute</td>\n      <td>0</td>\n      <td>0</td>\n      <td>2</td>\n      <td>NaN</td>\n      <td>1.000000</td>\n      <td>0-15</td>\n      <td>10.4-20.0</td>\n      <td>pywavelets</td>\n      <td>cmor2,1[win:0.6]</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>FCS01</td>\n      <td>False</td>\n      <td>NaN</td>\n      <td>False</td>\n      <td>FCS01CP</td>\n      <td>FCS01FP</td>\n      <td>frontal_left</td>\n      <td>frontal_left</td>\n      <td>S2_D3 hbo</td>\n      <td>S2_D3 hbo</td>\n      <td>first_minute</td>\n      <td>0</td>\n      <td>0</td>\n      <td>3</td>\n      <td>0.151859</td>\n      <td>0.000000</td>\n      <td>15-30</td>\n      <td>2.0-4.8</td>\n      <td>pywavelets</td>\n      <td>cmor2,1[win:0.6]</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>FCS01</td>\n      <td>False</td>\n      <td>NaN</td>\n      <td>False</td>\n      <td>FCS01CP</td>\n      <td>FCS01FP</td>\n      <td>frontal_left</td>\n      <td>frontal_left</td>\n      <td>S2_D3 hbo</td>\n      <td>S2_D3 hbo</td>\n      <td>first_minute</td>\n      <td>0</td>\n      <td>0</td>\n      <td>4</td>\n      <td>0.427183</td>\n      <td>0.000000</td>\n      <td>15-30</td>\n      <td>5.1-9.8</td>\n      <td>pywavelets</td>\n      <td>cmor2,1[win:0.6]</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>172075</th>\n      <td>FCS10</td>\n      <td>False</td>\n      <td>NaN</td>\n      <td>False</td>\n      <td>FCS10CP</td>\n      <td>FCS10FP</td>\n      <td>medial_right</td>\n      <td>medial_right</td>\n      <td>S8_D7 hbo</td>\n      <td>S8_D7 hbo</td>\n      <td>second_minute</td>\n      <td>0</td>\n      <td>0</td>\n      <td>7</td>\n      <td>0.188210</td>\n      <td>0.000000</td>\n      <td>30-44</td>\n      <td>5.1-9.8</td>\n      <td>pywavelets</td>\n      <td>cmor2,1[win:0.6]</td>\n    </tr>\n    <tr>\n      <th>172076</th>\n      <td>FCS10</td>\n      <td>False</td>\n      <td>NaN</td>\n      <td>False</td>\n      <td>FCS10CP</td>\n      <td>FCS10FP</td>\n      <td>medial_right</td>\n      <td>medial_right</td>\n      <td>S8_D7 hbo</td>\n      <td>S8_D7 hbo</td>\n      <td>second_minute</td>\n      <td>0</td>\n      <td>0</td>\n      <td>8</td>\n      <td>0.442469</td>\n      <td>0.336957</td>\n      <td>30-44</td>\n      <td>10.4-20.0</td>\n      <td>pywavelets</td>\n      <td>cmor2,1[win:0.6]</td>\n    </tr>\n    <tr>\n      <th>172077</th>\n      <td>FCS10</td>\n      <td>False</td>\n      <td>NaN</td>\n      <td>False</td>\n      <td>FCS10CP</td>\n      <td>FCS10FP</td>\n      <td>medial_right</td>\n      <td>medial_right</td>\n      <td>S8_D7 hbo</td>\n      <td>S8_D7 hbo</td>\n      <td>second_minute</td>\n      <td>0</td>\n      <td>0</td>\n      <td>9</td>\n      <td>0.173053</td>\n      <td>0.225543</td>\n      <td>44-59</td>\n      <td>2.0-4.8</td>\n      <td>pywavelets</td>\n      <td>cmor2,1[win:0.6]</td>\n    </tr>\n    <tr>\n      <th>172078</th>\n      <td>FCS10</td>\n      <td>False</td>\n      <td>NaN</td>\n      <td>False</td>\n      <td>FCS10CP</td>\n      <td>FCS10FP</td>\n      <td>medial_right</td>\n      <td>medial_right</td>\n      <td>S8_D7 hbo</td>\n      <td>S8_D7 hbo</td>\n      <td>second_minute</td>\n      <td>0</td>\n      <td>0</td>\n      <td>10</td>\n      <td>NaN</td>\n      <td>0.605072</td>\n      <td>44-59</td>\n      <td>5.1-9.8</td>\n      <td>pywavelets</td>\n      <td>cmor2,1[win:0.6]</td>\n    </tr>\n    <tr>\n      <th>172079</th>\n      <td>FCS10</td>\n      <td>False</td>\n      <td>NaN</td>\n      <td>False</td>\n      <td>FCS10CP</td>\n      <td>FCS10FP</td>\n      <td>medial_right</td>\n      <td>medial_right</td>\n      <td>S8_D7 hbo</td>\n      <td>S8_D7 hbo</td>\n      <td>second_minute</td>\n      <td>0</td>\n      <td>0</td>\n      <td>11</td>\n      <td>NaN</td>\n      <td>0.989130</td>\n      <td>44-59</td>\n      <td>10.4-20.0</td>\n      <td>pywavelets</td>\n      <td>cmor2,1[win:0.6]</td>\n    </tr>\n  </tbody>\n</table>\n<p>59088 rows × 20 columns</p>\n</div>","content_type":"text/html"},"text/plain":{"content":"         dyad  is_intra  is_intra_of  is_pseudo subject1 subject2  \\\n0       FCS01     False          NaN      False  FCS01CP  FCS01FP   \n1       FCS01     False          NaN      False  FCS01CP  FCS01FP   \n2       FCS01     False          NaN      False  FCS01CP  FCS01FP   \n3       FCS01     False          NaN      False  FCS01CP  FCS01FP   \n4       FCS01     False          NaN      False  FCS01CP  FCS01FP   \n...       ...       ...          ...        ...      ...      ...   \n172075  FCS10     False          NaN      False  FCS10CP  FCS10FP   \n172076  FCS10     False          NaN      False  FCS10CP  FCS10FP   \n172077  FCS10     False          NaN      False  FCS10CP  FCS10FP   \n172078  FCS10     False          NaN      False  FCS10CP  FCS10FP   \n172079  FCS10     False          NaN      False  FCS10CP  FCS10FP   \n\n                roi1          roi2   channel1   channel2           task  \\\n0       frontal_left  frontal_left  S2_D3 hbo  S2_D3 hbo   first_minute   \n1       frontal_left  frontal_left  S2_D3 hbo  S2_D3 hbo   first_minute   \n2       frontal_left  frontal_left  S2_D3 hbo  S2_D3 hbo   first_minute   \n3       frontal_left  frontal_left  S2_D3 hbo  S2_D3 hbo   first_minute   \n4       frontal_left  frontal_left  S2_D3 hbo  S2_D3 hbo   first_minute   \n...              ...           ...        ...        ...            ...   \n172075  medial_right  medial_right  S8_D7 hbo  S8_D7 hbo  second_minute   \n172076  medial_right  medial_right  S8_D7 hbo  S8_D7 hbo  second_minute   \n172077  medial_right  medial_right  S8_D7 hbo  S8_D7 hbo  second_minute   \n172078  medial_right  medial_right  S8_D7 hbo  S8_D7 hbo  second_minute   \n172079  medial_right  medial_right  S8_D7 hbo  S8_D7 hbo  second_minute   \n\n        epoch  section  bin  coherence  coherence_masked bin_time_range  \\\n0           0        0    0   0.270656          0.312500           0-15   \n1           0        0    1        NaN          0.692029           0-15   \n2           0        0    2        NaN          1.000000           0-15   \n3           0        0    3   0.151859          0.000000          15-30   \n4           0        0    4   0.427183          0.000000          15-30   \n...       ...      ...  ...        ...               ...            ...   \n172075      0        0    7   0.188210          0.000000          30-44   \n172076      0        0    8   0.442469          0.336957          30-44   \n172077      0        0    9   0.173053          0.225543          44-59   \n172078      0        0   10        NaN          0.605072          44-59   \n172079      0        0   11        NaN          0.989130          44-59   \n\n       bin_period_range wavelet_library      wavelet_name  \n0               2.0-4.8      pywavelets  cmor2,1[win:0.6]  \n1               5.1-9.8      pywavelets  cmor2,1[win:0.6]  \n2             10.4-20.0      pywavelets  cmor2,1[win:0.6]  \n3               2.0-4.8      pywavelets  cmor2,1[win:0.6]  \n4               5.1-9.8      pywavelets  cmor2,1[win:0.6]  \n...                 ...             ...               ...  \n172075          5.1-9.8      pywavelets  cmor2,1[win:0.6]  \n172076        10.4-20.0      pywavelets  cmor2,1[win:0.6]  \n172077          2.0-4.8      pywavelets  cmor2,1[win:0.6]  \n172078          5.1-9.8      pywavelets  cmor2,1[win:0.6]  \n172079        10.4-20.0      pywavelets  cmor2,1[win:0.6]  \n\n[59088 rows x 20 columns]","content_type":"text/plain"}}},"children":[],"key":"nt1HeKDZJs"}],"key":"omUkt4edeE"}],"key":"HDvEvWSjJP"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:39:29.289230Z","iopub.status.busy":"2025-07-03T19:39:29.289020Z","iopub.status.idle":"2025-07-03T19:39:29.941128Z","shell.execute_reply":"2025-07-03T19:39:29.940449Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(1, 1, figsize=(10, 10), subplot_kw={'projection': 'polar'})\n_ = study.plot_coherence_connectogram(s1_label='Child', s2_label='Parent', ax=ax)\n","key":"JJTnk09nQ6"},{"type":"outputs","id":"vwbSnS9xI2nlWl3ezwGNt","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"82bb79b972fba10f1f8bd28e98696a5d","path":"/82bb79b972fba10f1f8bd28e98696a5d.png"},"text/plain":{"content":"<Figure size 1000x1000 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"YQTclq5Afy"}],"key":"qaAR4jHis2"}],"key":"W3jFzHEjZS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Save to disk","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NWcZ1BLi62"}],"identifier":"save-to-disk","label":"Save to disk","html_id":"save-to-disk","implicit":true,"key":"FrAijEIxR1"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Multiple formats can be used to save the results to disk.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WP1MpUn3FE"}],"key":"Otfa7OaZdr"},{"type":"table","position":{"start":{"line":5,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Format","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Sn4iqLsR9D"}],"key":"fjdU2BoH2L"},{"type":"tableCell","header":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Use case","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"xBPcgQaS5V"}],"key":"fPlOEVLUfr"}],"key":"cS8aMyyCBr"},{"type":"tableRow","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":".csv","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"CF4YCcZogy"}],"key":"XCS6owwflw"},{"type":"tableCell","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Typical CSV file with a header, for sharing and importing in another python script or an external analysis software","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Lsi95JkzZ2"}],"key":"XVlYfHcSxa"}],"key":"X5Be8TDU13"},{"type":"tableRow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"inlineCode","value":".feather","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"PNjagzrzPj"}],"key":"FdJbrJ3ICm"},{"type":"tableCell","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Typical pandas dataframe storage format, for further analysis","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"pXPkspQRVR"}],"key":"pdaoWIo7W8"}],"key":"jmJuKtxPXw"},{"type":"tableRow","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"inlineCode","value":".pickle","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Fhrpd35yV0"}],"key":"LzZcLAFhLr"},{"type":"tableCell","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Used to reload the ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"vVMNQnPfe5"},{"type":"inlineCode","value":"Study","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Qr7qHxuVNb"},{"type":"text","value":" object for visualisation in a dashboard.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"LG0Jrocnsm"}],"key":"aCrq1YX0NA"}],"key":"RzpgEkvUaw"}],"key":"fQqwp9rzv6"}],"key":"Nsy9VfVCry"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:39:29.946514Z","iopub.status.busy":"2025-07-03T19:39:29.944881Z","iopub.status.idle":"2025-07-03T19:39:33.120142Z","shell.execute_reply":"2025-07-03T19:39:33.119005Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"csv_file_path = '../data/results/fnirs_study_example.csv'\nstudy.save_csv(csv_file_path)\n","key":"Ai2LKio8ez"},{"type":"outputs","id":"iZRMlg7S1EfTnbBcXwUZe","children":[],"key":"Xb5NVW0nOr"}],"key":"iNwRM2d292"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:39:33.123533Z","iopub.status.busy":"2025-07-03T19:39:33.122997Z","iopub.status.idle":"2025-07-03T19:39:33.525637Z","shell.execute_reply":"2025-07-03T19:39:33.524828Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"feather_file_path = '../data/results/fnirs_study_example.feather'\nstudy.save_feather(feather_file_path)\n","key":"W5q8WZHeqO"},{"type":"outputs","id":"Dal72XYvEnh4rbuW0MtpG","children":[],"key":"CjmQTD7tvj"}],"key":"hHrxSVQceg"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2025-07-03T19:39:33.527826Z","iopub.status.busy":"2025-07-03T19:39:33.527615Z","iopub.status.idle":"2025-07-03T19:39:41.076714Z","shell.execute_reply":"2025-07-03T19:39:41.076034Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Save to disk\n\nresults_file_path = '../data/results/fnirs_study_example.pickle'\nstudy.save_pickle(results_file_path)\n","key":"OUuI8TvQ1l"},{"type":"outputs","id":"DT2jqM8w1FiF82my6ujLI","children":[],"key":"m3Qiv3Sw2r"}],"key":"gc5Ly50kxe"}],"key":"vaA9p79w3o"},"references":{"cite":{"order":[],"data":{}}}}